<!--
Copyright 2018 Wes Barnett

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

{% extends "base.html" %}
{% block content %}
    <h1>Movie recommender</h1>
	<p>
    This is a movie recommender I built using Python (numpy, pandas,
    scipy, and Flask). The dataset comes from <a
    href="https://grouplens.org/datasets/movielens/">MovieLens</a>. I
    am using the small dataset in this program. The source code is
    located <a
        href="https://github.com/wesbarnett/movie-ratings">here</a>.
    </p>
    
    <p>
    Rate the following movies with 1 being the lowest score and 5 the
    highest score. 'NA' means you don't want to rate the movie. After
    submitting the form it could take a few minutes to build a model
    and return your results.
    </p>
    <form action="" method="post" novalidate>
        {{ form.hidden_tag() }}
        <table>
		{% for movie, radio in movies %}
        <tr><td>
                {{ movie }}
            </td>
            {% for subfield in radio %}
            <td>{{ subfield }}</td>
            <td>{{ subfield.label }}</td>
            {% endfor %}
            {% for error in radio.errors %}
            <span style="color: red;">[ERROR: {{ error }}]</span>
            {% endfor %}
        </tr>
        {% endfor %}
        </table>
        <p>{{ form.submit() }}</p>
    </form>
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    {% for message in messages %}
    {{ message }}
    {% endfor %}
    {% endif %}
    {% endwith %}
{% endblock %}
